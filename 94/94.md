Это ваша обычная структура приложения. У каждого типа классов — своя отдельная папка.
Пока что ничего неожиданного.

### Работа с моделью `User`

Если мы используем домены для структурирования кода,
где тогда должна находиться модель `User`?
Прямо в домене **Shared**.
Каждый отдельный домен её использует, поэтому она общая для всего приложения.

Чтобы сделать это, нужно изменить конфигурацию **User Provider** в `config/auth.php`:

```php
'providers' => [
    'users' => [
        'driver' => 'eloquent',
        'model' => \Domain\Shared\Models\User::class,
    ],
],
```

Модель была изменена с дефолтной `App\Models\User::class`.
После этого мы можем переместить `User` в пространство имён `Shared\Models`.

### `BaseModel` и фабрики

В большинстве приложений я использую `BaseModel`,
который расширяет базовый `Model` от Eloquent,
и все остальные модели расширяют уже его.
Этот класс также удобно расположить в домене **Shared**.

Когда вы используете домены, вам нужно переопределить метод модели под названием `newFactory`.
Этот метод возвращает новую фабрику, связанную с моделью.
По умолчанию Laravel пытается найти фабрику, исходя из пространства имён модели.
Но в нашем случае он попытается создать класс вроде:
`Database\Factories\Domain\Subscriber\Models\SubscriberFactory`
— очевидно, **это не то, что нам нужно**.

Прежде всего, я также создаю отдельные пространства имён для папки `database/factories`, разбивая её по доменам:


Martin Joo — Предметно-ориентированное проектирование с Laravel
Стр. 93 / 327
