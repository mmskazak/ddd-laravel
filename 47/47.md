**CQRS**

CQRS — это, на мой взгляд, один из самых переусложнённых и неправильно понятых аспектов DDD, так что давай разберёмся!
Это означает **Command and Query Responsibility Segregation** (разделение ответственности команд и запросов). Сложное название, давай посмотрим, что означают эти слова:

* **Команда (command)** — это операция записи, например создание нового продукта.
* **Запрос (query)** — это операция чтения, например получение всех продуктов.
* **Разделение ответственности** означает, что мы должны разделить эти два типа функций.

Так что вот такой простой класс **не удовлетворяет CQRS**:

```php
class ProductService
{
    public function create(ProductData $data): Product
    {
        // ...
    }

    public function getAll(): Collection
    {
        // ...
    }
}
```

Я не думаю, что с таким классом что-то не так; на самом деле, он может быть **лучшим** решением во многих проектах.

---

Так как же применять CQRS? Если подумать о предыдущих разделах, у нас есть схожие концепции с командами и запросами. Единственное отличие — это название:

* **Actions** играют роль команды или операции записи.
* **ViewModels** играют роль запроса или операции чтения.

Martin Joo — Предметно-ориентированное проектирование с Laravel

46 / 327