# Состояния и переходы (States And Transitions)

**State** — это класс, который представляет состояние чего-то.
Это «что-то» в большинстве случаев — это Eloquent-модель.
То есть вместо строки у нас есть выделенный класс.

Как выглядит класс State?
Представим, что мы работаем над e-commerce приложением, и у нас есть класс `Order`.
У `Order` есть статус, например:

* Draft
* Pending
* Paid
* PaymentFailed

Для простоты давай скажем, что самая критичная бизнес-логика, связанная со статусом заказа, — это возможность его изменить.
Покупатель может изменить заказ в статусе Draft, но **не может** изменить заказ со статусом Paid.

Сначала создадим абстрактный класс:

```php
abstract class OrderStatus
{
    public function __construct(protected Order $order)
    {
    }

    abstract public function canBeChanged(): bool;
}
```

Каждое состояние будет расширять родительский класс `OrderStatus`. Теперь мы можем создать конкретные классы.

Martin Joo — Предметно-ориентированное проектирование с Laravel

48 / 327
