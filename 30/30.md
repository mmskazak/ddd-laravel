…классом, содержащем методы, которые используются один раз во всём приложении.
* Если ты не кладёшь каждый запрос в репозиторий, тогда зачем вообще использовать репозитории? В этом случае ты в итоге получаешь несогласованную структуру: часть запросов остаётся в контроллерах или моделях, а другая часть живёт в репозитории. По моему опыту, это не оптимальное решение.
*Лично для меня: я не чувствую, что `$products->search()` или `$this->products->getById($id)` хорошо вписываются в Laravel.

Однако у репозиториев есть и хорошие стороны:

* Тебе не нужно иметь один репозиторий на каждую модель.
  Представь, у тебя большой корпоративный проект с 200+ таблицами. Один «модуль» или набор функций — это очень простой трекер задач. Этот модуль требует всего шесть таблиц и 500 строк кода, связанного с базой данных. Тебе не нужно размазывать эти 500 строк по шести репозиториям (как ты сделал бы с моделями). Ты можешь написать только один класс, называемый `IssueTrackerRepository`. С моделями ты так не сделаешь. Думаю, это может быть полезно в некоторых ситуациях.

Честно говоря, это единственное преимущество, которое я могу придумать.
Если ты уже знаком с DDD, ты, вероятно, слышал что-то вроде этого:
**паттерн репозитория абстрагирует хранилище данных и позволяет тебе заменить базу данных, не меняя бизнес-код**. Это правда.
Однако за последнее десятилетие я сталкивался с множеством странных запросов на доработки, но вот два запроса, которые ко мне никогда не поступали:

* Никто никогда не просил меня сменить язык программирования существующего проекта.
* Никто никогда не просил меня сменить движок базы данных под работающим проектом.

Так что я не могу честно говорить об этом как о преимуществе. При этом, я думаю, что репозитории бесполезны в большинстве ситуаций. На самом деле, Laravel предлагает лучшее решение: **пользовательские query builders**.

Martin Joo — Предметно-ориентированное проектирование с Laravel

29 / 327
